# Mail Core Router 테스트 체크리스트

## 📋 엔드포인트 목록 및 테스트 상태

### 1. 메일 발송 (POST /send)
- [ ] **기본 메일 발송 테스트**
  - [ ] 필수 필드 (to_emails, subject, content) 포함
  - [ ] 정상적인 메일 발송 확인
  - [ ] 응답 형식 검증 (MailSendResponse)
  
- [ ] **수신자 유형별 테스트**
  - [ ] TO 수신자만 있는 경우
  - [ ] TO + CC 수신자가 있는 경우
  - [ ] TO + CC + BCC 수신자가 있는 경우
  - [ ] 여러 수신자 (쉼표로 구분) 테스트
  
- [ ] **첨부파일 테스트**
  - [ ] 첨부파일 없는 메일 발송
  - [ ] 단일 첨부파일 메일 발송
  - [ ] 다중 첨부파일 메일 발송
  - [ ] 첨부파일 저장 경로 확인
  
- [ ] **우선순위 테스트**
  - [ ] NORMAL 우선순위 (기본값)
  - [ ] HIGH 우선순위
  - [ ] LOW 우선순위
  
- [ ] **오류 처리 테스트**
  - [ ] 필수 필드 누락 시 오류 처리
  - [ ] 잘못된 이메일 형식 처리
  - [ ] 인증되지 않은 사용자 접근 차단
  - [ ] 데이터베이스 오류 처리

### 2. 받은 메일함 (GET /inbox)
- [ ] **기본 조회 테스트**
  - [ ] 기본 페이지네이션 (page=1, limit=20)
  - [ ] 응답 형식 검증 (MailListWithPaginationResponse)
  - [ ] 메일 목록 정렬 확인 (최신순)
  
- [ ] **페이지네이션 테스트**
  - [ ] 다양한 페이지 번호 테스트
  - [ ] 다양한 limit 값 테스트 (1~100)
  - [ ] 페이지네이션 정보 정확성 확인
  
- [ ] **검색 기능 테스트**
  - [ ] 제목으로 검색
  - [ ] 발신자로 검색
  - [ ] 내용으로 검색
  - [ ] 검색어 없을 때 전체 조회
  
- [ ] **필터링 테스트**
  - [ ] 메일 상태별 필터링
  - [ ] 필터 조건 없을 때 전체 조회
  
- [ ] **오류 처리 테스트**
  - [ ] 잘못된 페이지 번호 처리
  - [ ] 잘못된 limit 값 처리
  - [ ] 받은편지함 폴더 없을 때 처리

### 3. 받은 메일 상세 (GET /inbox/{mail_id})
- [ ] **기본 상세 조회 테스트**
  - [ ] 유효한 mail_id로 조회
  - [ ] 응답 형식 검증 (MailDetailResponse)
  - [ ] 메일 내용 완전성 확인
  
- [ ] **메일 정보 확인**
  - [ ] 발신자 정보 정확성
  - [ ] 수신자 정보 (TO, CC, BCC) 정확성
  - [ ] 첨부파일 목록 정확성
  - [ ] 메일 상태 및 우선순위 확인
  
- [ ] **읽음 처리 테스트**
  - [ ] 읽지 않은 메일 조회 시 read_at 업데이트
  - [ ] 이미 읽은 메일 조회 시 read_at 유지
  
- [ ] **오류 처리 테스트**
  - [ ] 존재하지 않는 mail_id 처리
  - [ ] 잘못된 형식의 mail_id 처리
  - [ ] 권한 없는 메일 접근 차단

### 4. 보낸 메일함 (GET /sent)
- [ ] **기본 조회 테스트**
  - [ ] 발신자가 현재 사용자인 메일만 조회
  - [ ] SENT 상태 메일만 조회
  - [ ] 응답 형식 검증
  
- [ ] **페이지네이션 테스트**
  - [ ] 기본 페이지네이션 동작
  - [ ] 다양한 페이지/limit 조합
  
- [ ] **검색 기능 테스트**
  - [ ] 제목으로 검색
  - [ ] 수신자로 검색
  - [ ] 내용으로 검색
  
- [ ] **정렬 테스트**
  - [ ] 발송일시 기준 내림차순 정렬

### 5. 보낸 메일 상세 (GET /sent/{mail_id})
- [ ] **기본 상세 조회 테스트**
  - [ ] 유효한 mail_id로 조회
  - [ ] 발신자 권한 확인
  - [ ] 응답 형식 검증
  
- [ ] **권한 검증 테스트**
  - [ ] 본인이 발송한 메일만 조회 가능
  - [ ] 다른 사용자 메일 접근 차단
  
- [ ] **오류 처리 테스트**
  - [ ] 존재하지 않는 mail_id 처리
  - [ ] 권한 없는 접근 차단

### 6. 임시보관함 (GET /drafts)
- [ ] **기본 조회 테스트**
  - [ ] DRAFT 상태 메일만 조회
  - [ ] 발신자가 현재 사용자인 메일만 조회
  - [ ] 응답 형식 검증
  
- [ ] **페이지네이션 테스트**
  - [ ] 기본 페이지네이션 동작
  - [ ] 다양한 페이지/limit 조합
  
- [ ] **검색 기능 테스트**
  - [ ] 제목으로 검색
  - [ ] 수신자로 검색
  - [ ] 내용으로 검색
  
- [ ] **특수 처리 테스트**
  - [ ] 제목 없는 메일 "(제목 없음)" 표시 확인

### 7. 임시보관함 메일 상세 (GET /drafts/{mail_id})
- [ ] **기본 상세 조회 테스트**
  - [ ] 유효한 mail_id로 조회
  - [ ] DRAFT 상태 메일만 조회 가능
  - [ ] 응답 형식 검증
  
- [ ] **권한 검증 테스트**
  - [ ] 본인의 임시보관 메일만 조회 가능
  - [ ] 다른 사용자 메일 접근 차단
  
- [ ] **오류 처리 테스트**
  - [ ] 존재하지 않는 mail_id 처리
  - [ ] DRAFT가 아닌 메일 접근 차단

### 8. 휴지통 (GET /trash)
- [ ] **기본 조회 테스트**
  - [ ] DELETED 상태 메일만 조회
  - [ ] 응답 형식 검증
  - [ ] 삭제일시 기준 정렬 확인
  
- [ ] **페이지네이션 테스트**
  - [ ] 기본 페이지네이션 동작
  - [ ] 다양한 페이지/limit 조합
  
- [ ] **검색 기능 테스트**
  - [ ] 제목으로 검색
  - [ ] 발신자로 검색
  - [ ] 내용으로 검색
  
- [ ] **필터링 테스트**
  - [ ] 메일 상태별 필터링

### 9. 휴지통 메일 상세 (GET /trash/{mail_id})
- [ ] **기본 상세 조회 테스트**
  - [ ] 유효한 mail_id로 조회
  - [ ] DELETED 상태 메일만 조회 가능
  - [ ] 응답 형식 검증
  
- [ ] **권한 검증 테스트**
  - [ ] 접근 권한 확인
  - [ ] 다른 사용자 메일 접근 차단
  
- [ ] **오류 처리 테스트**
  - [ ] 존재하지 않는 mail_id 처리
  - [ ] DELETED가 아닌 메일 접근 차단

### 10. 첨부파일 다운로드 (GET /attachments/{attachment_id})
- [ ] **기본 다운로드 테스트**
  - [ ] 유효한 attachment_id로 다운로드
  - [ ] 파일 응답 형식 확인 (FileResponse)
  - [ ] 파일 내용 정확성 확인
  
- [ ] **권한 검증 테스트**
  - [ ] 메일 접근 권한 확인
  - [ ] 다른 사용자 첨부파일 접근 차단
  
- [ ] **파일 처리 테스트**
  - [ ] 다양한 파일 형식 다운로드
  - [ ] 파일명 인코딩 처리
  - [ ] Content-Type 헤더 확인
  
- [ ] **오류 처리 테스트**
  - [ ] 존재하지 않는 attachment_id 처리
  - [ ] 파일이 실제로 존재하지 않을 때 처리
  - [ ] 권한 없는 접근 차단

## 🔧 공통 테스트 항목

### 인증 및 권한
- [ ] **인증 토큰 검증**
  - [ ] 유효한 토큰으로 접근
  - [ ] 만료된 토큰으로 접근 차단
  - [ ] 잘못된 토큰으로 접근 차단
  - [ ] 토큰 없이 접근 차단

### 데이터베이스 연동
- [ ] **데이터 일관성**
  - [ ] 트랜잭션 롤백 테스트
  - [ ] 동시성 처리 테스트
  - [ ] 외래키 제약조건 확인

### 성능 테스트
- [ ] **응답 시간**
  - [ ] 각 엔드포인트 응답 시간 측정
  - [ ] 대용량 데이터 처리 성능
  - [ ] 페이지네이션 성능

### 보안 테스트
- [ ] **입력 검증**
  - [ ] SQL 인젝션 방지
  - [ ] XSS 방지
  - [ ] 파일 업로드 보안

## 📊 테스트 결과 요약

### 성공한 테스트
- [ ] 총 테스트 수: ___
- [ ] 성공한 테스트 수: ___
- [ ] 성공률: ___%

### 실패한 테스트
- [ ] 실패한 테스트 수: ___
- [ ] 주요 실패 원인:
  - [ ] _______________
  - [ ] _______________
  - [ ] _______________

### 발견된 이슈
1. **이슈 제목**: _______________
   - **심각도**: High/Medium/Low
   - **설명**: _______________
   - **해결 방법**: _______________
   - **상태**: Open/In Progress/Resolved

2. **이슈 제목**: _______________
   - **심각도**: High/Medium/Low
   - **설명**: _______________
   - **해결 방법**: _______________
   - **상태**: Open/In Progress/Resolved

## 📝 테스트 실행 로그

### 테스트 실행 일시
- **시작 시간**: _______________
- **종료 시간**: _______________
- **총 소요 시간**: _______________

### 환경 정보
- **서버 URL**: http://localhost:8000
- **데이터베이스**: PostgreSQL
- **테스트 도구**: _______________
- **테스트 실행자**: _______________

---
*이 체크리스트는 mail_core_router.py의 모든 엔드포인트를 체계적으로 테스트하기 위한 가이드입니다.*