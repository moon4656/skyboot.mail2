
# User Router 엔드포인트 테스트 계획

## 📋 엔드포인트 목록

### 1. POST `/` - 사용자 생성
- **권한**: 관리자 필수
- **기능**: 조직 내 새 사용자 생성
- **검증**: 이메일/사용자명 중복, 최대 사용자 수 제한

### 2. GET `/` - 사용자 목록 조회
- **권한**: 관리자 필수
- **기능**: 조직 사용자 목록 (페이지네이션, 검색, 필터링)
- **파라미터**: page, limit, search, is_active

### 3. GET `/me` - 현재 사용자 정보 조회
- **권한**: 인증된 사용자
- **기능**: 로그인한 사용자 정보 반환

### 4. GET `/{user_id}` - 특정 사용자 조회
- **권한**: 본인 또는 관리자
- **기능**: 조직 내 특정 사용자 정보 조회

### 5. PUT `/{user_id}` - 사용자 정보 수정
- **권한**: 본인 또는 관리자
- **기능**: 사용자 정보 수정 (username, full_name, is_active)

### 6. DELETE `/{user_id}` - 사용자 삭제
- **권한**: 관리자 필수 (본인 삭제 불가)
- **기능**: 소프트 삭제

### 7. POST `/{user_id}/change-password` - 비밀번호 변경
- **권한**: 본인 또는 관리자
- **기능**: 비밀번호 변경

### 8. GET `/stats/overview` - 사용자 통계 조회
- **권한**: 관리자 필수
- **기능**: 조직 사용자 통계

### 9. POST `/{user_id}/activate` - 사용자 활성화
- **권한**: 관리자 필수
- **기능**: 비활성화된 사용자 활성화

### 10. POST `/{user_id}/deactivate` - 사용자 비활성화
- **권한**: 관리자 필수 (본인 비활성화 불가)
- **기능**: 사용자 비활성화

## 🧪 테스트 케이스 설계

### 인증 및 권한 테스트
1. **무인증 요청 테스트** - 401 Unauthorized
2. **일반 사용자 관리자 기능 접근** - 403 Forbidden
3. **본인 정보 접근** - 200 OK
4. **타인 정보 접근 (일반 사용자)** - 403 Forbidden
5. **관리자 모든 기능 접근** - 200 OK

### 데이터 검증 테스트
1. **유효하지 않은 이메일 형식**
2. **중복 이메일/사용자명**
3. **필수 필드 누락**
4. **잘못된 데이터 타입**
5. **존재하지 않는 사용자 ID**

### 비즈니스 로직 테스트
1. **본인 삭제/비활성화 방지**
2. **조직 내 사용자만 접근**
3. **페이지네이션 동작**
4. **검색 및 필터링**
5. **비밀번호 변경 검증**

## ✅ 체크리스트

### 기본 기능
- [ ] 모든 엔드포인트 응답 확인
- [ ] HTTP 상태 코드 정확성
- [ ] 응답 데이터 구조 검증
- [ ] 에러 메시지 한국어 확인

### 보안
- [ ] 인증 토큰 검증
- [ ] 권한 기반 접근 제어
- [ ] 조직 격리 확인
- [ ] 민감 정보 노출 방지

### 성능
- [ ] 페이지네이션 동작
- [ ] 대용량 데이터 처리
- [ ] 응답 시간 측정

### 데이터 무결성
- [ ] 트랜잭션 롤백 확인
- [ ] 중복 데이터 방지
- [ ] 외래 키 제약 조건
- [ ] 소프트 삭제 동작